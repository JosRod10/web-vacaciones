<div class="p-3 fade-in-slow">
    <!-- <div class="container-fluid contenedor shadow p-2"> -->
        <div class="container-fluid box">
            <div class="row mb-1">
                <div class="col-lg-3 col-md-4 col-sm-12 d-flex justify-content-start">
                    <p *ngIf="this.solicitudes[0]">Solicitudes pendientes</p>
                   <p *ngIf="!this.solicitudes[0]">No hay solicitudes pendientes</p>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 d-flex justify-content-end"></div>
                <div class="col-lg-3 col-md-5 col-sm-12 d-flex justify-content-end"  (click)="abrirAlerta()" style="cursor: pointer;">
                   <p>{{this.user[0].Nombre_completo}}</p>&nbsp;&nbsp;
                   <i class="bi bi-person-circle" style="font-size: 3.5vh; margin-top: -1vh;"></i>
                </div>
            </div>
        </div>        
        <div class="row" style="min-height: 83vh;">
            <div class="col-lg-4 col-md-4 col-sm-12">
                    <!-- <div class="d-flex justify-content-start mb-2">
                        <h6>Solicitudes pendientes</h6>
                    </div> -->
                <div class="overflow-auto" style="max-height: 83vh;">
                    <div class="list-group" *ngFor="let solicitud of solicitudes">
                        <a class="list-group-item list-group-item-action" aria-current="true" style="cursor: pointer;" (click)="activarCard(solicitud)">
                            <div class="d-flex w-100 justify-content-between">
                            <!-- <small><span class="punto">.</span></small> -->
                            <i class="bi bi-person-circle" style="font-size: 3.5vh; margin-top: -1vh;"></i><h6 class="mb-1 font-weight-bold">{{solicitud.nombre}}</h6>
                            <small><span class="badge rounded-pill bg-primary">{{solicitud.cuantos_dias}} dÃ­as</span></small>
                            <!-- <small><button class="btn btn-light rechazar"><i class="bi bi-x-circle"></i></button><button class="btn btn-light aprobar"><i class="bi bi-check-circle"></i></button></small> -->
                            </div>
                            <!-- <p class="mb-1"> {{solicitud.motivo}}</p> -->
                            <small>Del {{solicitud.fecha_apartir}} al {{solicitud.fecha_hasta}}</small>
                        </a>
                        
                        <!-- <ul class="list-group" *ngFor="let colaborador of colaboradores_faltantes">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <span style="font-size: small; font-weight: bold;">{{colaborador.nombreCompleto}}
                                <p style="color: #376fb2;">{{colaborador.departamento}}</p></span>
                                <span *ngIf="colaborador.fecha != this.fecha_hoy.substring(0,12)" class="badge rounded-pill bg-primary">
                                {{ colaborador.fecha }}
                                </span>
                                <span *ngIf="colaborador.fecha == this.fecha_hoy.substring(0,12)" class="badge rounded-pill bg-warning">
                                Â¡Felicidades! ðŸ¥³
                                </span>
                            </li>
                        </ul> -->
                    </div>
                </div>
                
            </div>
            
            <div class="col-lg-8 col-md-8 col-sm-12">

                <div class="card mb-4 d-flex align-items-center justify-content-center" style="min-height: 35vh;" *ngIf="!this.solicitudes[0]">
                    <div class="spinner-grow mb-2" style="width: 3rem; height: 3rem;" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <div>
                        <h5>Esperando recibir solicitud</h5>
                    </div>
                </div>

                <div class="card mb-1" style="min-height: 35vh;" *ngIf="this.solicitudes[0]">
                    <div class="card-header">
                        <div class="row">
                            <div class="col-lg-8 col-md-8 col-sm-12 d-flex justify-content-start align-items-center">
                               {{this.cardSolicitud.fecha_solicitud}}&nbsp;<span *ngIf="this.cardSolicitud.firma_interesado" class="badge rounded-pill bg-success">Interesado</span>&nbsp;<span *ngIf="this.cardSolicitud.firma_jefe_in" class="badge rounded-pill bg-success">Jefe inmediato</span>&nbsp;<span *ngIf="this.cardSolicitud.firms_gerente" class="badge rounded-pill bg-success">Gerente</span>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 d-flex justify-content-end align-items-center">
                               <span class="badge rounded-pill bg-warning">{{this.cardSolicitud.tipoSolicitud}}</span>
                            </div>
                        </div>
                        
                    </div>
                    <div class="card-body">
                        
                        <!-- <a href="#" class="btn btn-primary">Go somewhere</a> -->
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-6">
                                <h6 class="card-title">{{this.cardSolicitud.nombre}}</h6>
                                <span class="card-text-subtitle">Departamento: {{this.cardSolicitud.Departamento}}</span><br>
                                <span class="card-text-subtitle">Puesto: {{this.cardSolicitud.Puesto}}</span>
                                <div class="row mt-2">
                                    <div class="col-1"></div>
                                    <div class="col-3">
                                        <div class="card" style="width: 10rem;">
                                            <div class="card-header d-flex justify-content-center" style="background-color: rgb(242, 34, 34); font-size: large; font-weight: bold; color: #fff;">
                                                {{this.cardSolicitud.fecha_apartir.substring(6,9)}}
                                            </div>
                                            <div class="card-body d-flex align-items-center justify-content-center" style="font-size:4em; font-weight: bold;">
                                                <h2>{{this.cardSolicitud.fecha_apartir.substring(0,2)}}</h2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-3 d-flex justify-content-end align-items-center" style="font-size: 2em;">
                                        <div>
                                            <i class="bi bi-arrow-right"></i>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="card" style="width: 10rem;">
                                            <div class="card-header d-flex justify-content-center" style="background-color: rgb(242, 34, 34); font-size: large; font-weight: bold; color: #fff;">
                                                {{this.cardSolicitud.fecha_hasta.substring(6,9)}}
                                            </div>
                                            <div class="card-body d-flex align-items-center justify-content-center" style="font-size:4em; font-weight: bold;">
                                                <h2>{{this.cardSolicitud.fecha_hasta.substring(0,2)}}</h2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-2"></div>
                                </div>
                                <div class="row"></div>
                                <div class="row mt-1">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <!-- <li class="list-group-item" style="font-weight: bold;">Tipo Solicitud: <span class="badge rounded-pill bg-warning">{{this.cardSolicitud.tipoSolicitud}}</span></li> -->
                                        <p class="motivo">Motivo: </p><p class="motivo-text">{{this.cardSolicitud.motivo}}</p>

                                        <!-- <span style="font-weight: bold;">DÃ­as ocupados: {{this.cardSolicitud.Dias_ocupados}} de {{this.cardSolicitud.Dias_vacaciones}} dÃ­as</span> -->
                                    </div>
                                    <!-- <div class="col-lg-4 col-md-5 col-sm-12"></div>
                                    <div class="col-lg-2 col-md-2 col-sm-12"></div> -->
                                </div>
                                
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6">
                                <div>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item" style="font-weight: bold;">DÃ­as: <span class="badge rounded-pill bg-primary">{{this.cardSolicitud.cuantos_dias}}</span></li>
                                        <li class="list-group-item" style="font-weight: bold;">Permiso: <span class="badge rounded-pill bg-primary">{{this.cardSolicitud.tipo_permiso}}</span></li>
                                        <li class="list-group-item">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" [checked]="this.cardSolicitud.con_sueldo == true" disabled id="flexCheckDefault">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    Con goce de sueldo
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" [checked]="this.cardSolicitud.sin_sueldo == true" disabled id="flexCheckDefault">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    Sin goce de sueldo
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" [checked]="this.cardSolicitud.sindicalizado == true" disabled id="flexCheckDefault">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    Sindicalizado
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" [checked]="this.cardSolicitud.no_sindicalizado == true" disabled id="flexCheckDefault">
                                                <label class="form-check-label" for="flexCheckDefault">
                                                    No sindicalizado
                                                </label>
                                            </div>
                                        </li>
                                        <!-- <li class="list-group-item" style="font-weight: bold;">Tipo Solicitud: <span class="badge rounded-pill bg-warning">{{this.cardSolicitud.tipoSolicitud}}</span></li> -->
                                        <li class="list-group-item" style="font-weight: bold;"><span style="font-weight: bold;">DÃ­as ocupados: {{this.cardSolicitud.Dias_ocupados}} de {{this.cardSolicitud.Dias_vacaciones}} dÃ­as</span></li>
                                        <!-- <li class="list-group-item">A fourth item</li> -->
                                    </ul>
                                </div>
                                <div class="row mt-2">
                                    <!-- <div class="col-lg-4 col-md-4 col-sm-12"></div>
                                    <div class="col-lg-3 col-md-3 col-sm-12"></div> -->
                                    
                                    <div class="col-lg-12 col-md-12 col-sm-12 d-flex justify-content-end">

                                        <!-- <label *ngIf="this.firmaCheck" class="aut">Firmar</label>&nbsp;&nbsp;
                                        <div *ngIf="this.firmaCheck" class="form-check form-switch">
                                            <input #miCheckboxRI class="form-check-input activ" formControlName="firma" type="checkbox" id="flexSwitchCheckDefault" (change)="accion(this.cardSolicitud.id, 1)">
                                            &nbsp;&nbsp;<label class="form-check-label aut" for="flexSwitchCheckDefault"></label> -->
                                            <!-- {{checkLeyenda}} -->
                                        <!-- </div> -->

                                        <!-- <label *ngIf="this.user[0].Tipo == 'JI'" class="aut">Firmar</label>&nbsp;&nbsp;
                                        <div *ngIf="this.user[0].Tipo == 'JI'" class="form-check form-switch">
                                            <input #miCheckboxJI class="form-check-input activ" formControlName="firma" type="checkbox" id="flexSwitchCheckDefault" (change)="firmaJefe(this.cardSolicitud.id)">
                                            &nbsp;&nbsp;<label class="form-check-label aut" for="flexSwitchCheckDefault"></label> -->
                                            <!-- {{checkLeyenda}} -->
                                        <!-- </div> -->

                                        <span *ngIf="this.spinerFirma" class="loader-firm"></span>

                                        <button *ngIf="this.cardSolicitud.status == 'Aceptado'" data-bs-toggle="modal" [attr.data-bs-target]="'#modal'" type="button" class="btn btn-outline-success"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: 1em;">
                                        <i class="bi bi-check-lg"></i> Firmar
                                        </button>

                                        <button *ngIf="this.user[0].Tipo == 'JI'" data-bs-toggle="modal" [attr.data-bs-target]="'#modal'" type="button" class="btn btn-outline-success"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: 1em;">
                                        <i class="bi bi-check-lg"></i> Firmar
                                        </button>

                                        <button *ngIf="this.user[0].Tipo == 'G'" data-bs-toggle="modal" [attr.data-bs-target]="'#modal'" type="button" class="btn btn-outline-success"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: 1em;">
                                        <i class="bi bi-check-lg"></i> Firmar
                                        </button>


                                        <!-- <label *ngIf="this.user[0].Tipo == 'G'" class="aut">Firmar</label>&nbsp;&nbsp;
                                        <div *ngIf="this.user[0].Tipo == 'G'" class="form-check form-switch">
                                            <input #miCheckboxG class="form-check-input activ" formControlName="firma" type="checkbox" id="flexSwitchCheckDefault" (change)="firmaGerente(this.cardSolicitud.id)">
                                            &nbsp;&nbsp;<label class="form-check-label aut" for="flexSwitchCheckDefault"></label> -->
                                            <!-- {{checkLeyenda}} -->
                                        <!-- </div> -->

                                        <button *ngIf="this.cardSolicitud.firma_interesado == 'true' && this.cardSolicitud.firma_jefe_in == 'true' && this.cardSolicitud.firms_gerente == 'true' && this.firmaCheck == false && this.cardSolicitud.status != 'Aceptado'" type="button" class="btn btn-outline-success" (click)="activarFirma(this.cardSolicitud.id)"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: 1em;">
                                        <i class="bi bi-check-lg"></i> Aceptado
                                        </button>

                                        <button disabled *ngIf="this.cardSolicitud.firma_interesado == 'true' && this.cardSolicitud.firma_jefe_in == 'false' && this.cardSolicitud.firms_gerente == 'false'" type="button" class="btn btn-outline-success" (click)="accion(this.cardSolicitud.id, 1)"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: 1em;">
                                        <i class="bi bi-check-lg"></i> Aceptado
                                        </button>

                                        <button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" [attr.data-bs-target]="'#modal-re'"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                        <i class="bi bi-x-lg"></i> Rechazado
                                        </button>

                                    </div>
                                    <!-- <div class="col-lg-4 col-md-1 col-sm-12 d-flex justify-content-end"><span style="font-weight: bold;">ContestaciÃ³n:</span></div> -->
                                    <!-- <div class="col-lg-2 col-md-2 col-sm-12 d-flex justify-content-start" style="margin-right: 10em;"> -->
                                        <!-- <button (click)="accion(this.cardSolicitud.id, 0)" type="button" class="btn btn-light rechazar" data-bs-toggle="tooltip" data-bs-placement="top" title="Rechazado">
                                            <i class="bi bi-x-lg"></i>
                                        </button> -->
                                        <!-- <button type="button" class="btn btn-primary"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                        Rechazado
                                        </button> -->
                                    <!-- </div> -->
                                    <!-- <div class="col-lg-1 col-md-1 col-sm-12"></div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="container sticky-header"><p class="table-title">Quienes estan ausentes?</p></div> -->
                
                    
                <div class="overflow-auto" style="max-height: 41vh;">      
                    <table class="table table-light table-hover">
                        <thead>
                            <tr class="table-title">
                            Ausentes:
                            </tr>
                            <tr>
                            <th scope="col">#</th>
                            <th scope="col">Nombre</th>
                            <th scope="col">Dias</th>
                            <th scope="col">Periodo</th>
                            <th scope="col">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let persona of ausentes; let i = index">
                            <th scope="row">{{i+1}}</th>
                            <td>{{persona.nombre}}</td>
                            <td>{{persona.cuantos_dias}}</td>
                            <td>{{persona.fecha_apartir}} al {{persona.fecha_hasta}}</td>
                            <td><span class="badge rounded-pill bg-warning">{{persona.status}}</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
        <button class="btn btn-secondary g-boton" type="button" (click)="abrirPanelReportes()">Generar reporte</button>

    <!-- </div> -->
</div>

<!-- <button role="button" data-bs-toggle="modal" [attr.data-bs-target]="'#modal'">Abrir Modal</button> -->
<!-- Modal para firmar solicitud -->
  <div class="modal" [id]="'modal'" tabindex="-1">
    <div class="modal-dialog  modal-dialog-centered">
        <div class="modal-content">
        <div class="modal-header d-flex justify-content-center">
            <h3 style="font-weight: bold;" *ngIf="spinerBandera == false" class="modal-title">Â¡Alerta!</h3>
            <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
        </div>
        <div *ngIf="spinerBandera == false" class="modal-body">

            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12  d-flex justify-content-center">
                    <p style="font-size: medium;">Â¿ Estas segur&#64; de firmar esta solicitud ?</p>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12  d-flex justify-content-center">
                    <i class="bi bi-pencil-fill" style="font-size: 2em;"></i>
                </div>
            </div>

        </div>
        <div *ngIf="spinerBandera" class="modal-body d-flex justify-content-center">
            <span class="loader"></span>
        </div>
        <div class="modal-footer d-flex justify-content-center">
            <button *ngIf="this.cardSolicitud.status == 'Aceptado' && spinerBandera == false" type="button" class="btn btn-outline-success" (click)="firmaRelaciones(this.cardSolicitud.id, 1)">Firmar</button>
            <button *ngIf="this.user[0].Tipo == 'JI' && spinerBandera == false" type="button" class="btn btn-outline-success" (click)="firmaJefe(this.cardSolicitud)">Firmar</button>
            <button *ngIf="this.user[0].Tipo == 'G' && spinerBandera == false" type="button" class="btn btn-outline-success" (click)="firmaGerente(this.cardSolicitud)">Firmar</button>
            <button *ngIf="spinerBandera == false" type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
        </div>
    </div>
  </div>

<!-- Modal para rechazar solicitud -->
  <div class="modal" [id]="'modal-re'" tabindex="-1">
    <div class="modal-dialog  modal-dialog-centered">
        <div class="modal-content">
        <div class="modal-header d-flex justify-content-center">
            <h3 style="font-weight: bold;" *ngIf="spinerBandera == false" class="modal-title">Â¡Alerta!</h3>
            <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
        </div>
        <div *ngIf="spinerBandera == false" class="modal-body">

            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12  d-flex justify-content-center">
                    <p style="font-size: medium;">Â¿ Estas segur&#64; de rechazar esta solicitud ?</p>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12  d-flex justify-content-center">
                    <i class="bi bi-trash-fill" style="font-size: 2em;"></i>
                </div>
            </div>

        </div>
        <div *ngIf="spinerBandera" class="modal-body d-flex justify-content-center">
            <span class="loader"></span>
        </div>
        <div class="modal-footer d-flex justify-content-center">
            <button type="button" class="btn btn-outline-danger" (click)="accion(this.cardSolicitud.id, 0)">Rechazar</button>
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
        </div>
    </div>
  </div>
